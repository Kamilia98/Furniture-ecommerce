<app-header-banner bannerTitle="Shop"></app-header-banner>

<div class="bg-secondary px-5">
  <div
    class="h-[100px] flex items-center justify-between max-w-[1240px] m-auto"
  >
    <!-- Left Section: Filter & Results Info -->
    <div class="flex gap-4 items-center">
      <div class="flex gap-2 cursor-pointer" (click)="toggleShowFilter()">
        <img src="icons/filter.svg" alt="Filter Icon" />
        <p>Filter</p>
      </div>
      <div class="hidden sm:block border border-gray-medium self-stretch"></div>
      <p class="hidden text-sm sm:block">Showing 1-16 of 40 Results</p>
    </div>

    <!-- Right Section: Sorting Dropdown -->
    <div class="flex items-center gap-4">
      <p>Sort By</p>
      <div class="relative">
        <button
          class="bg-white h-14 flex items-center px-5 cursor-pointer w-full min-w-48 border border-gray-medium rounded-md focus:outline-none"
          (click)="toggleDropdown(true)"
        >
          <span class="text-gray-dark">{{ searchValue }}</span>
        </button>
        <app-dropdown
          *ngIf="isMenuOpen && menuItems.length > 0"
          [items]="menuItems"
          (selectedValueChange)="onSortChange($event)"
        ></app-dropdown>
      </div>
    </div>
  </div>
</div>

<!-- Content -->
<div #productsContainer class="p-5 flex relative gap-5">
  <!-- Overlay -->
  @if (showFilters) {
  <div
    class="fixed lg:absolute top-0 left-0 w-full h-full bg-[#00000073] z-[999] lg:hidden"
    (click)="toggleShowFilter(false)"
  ></div>
  <div
    class="fixed lg:relative top-0 left-0 w-full h-full lg:h-auto bg-white max-w-[300px] p-[25px] flex flex-col gap-[25px] z-[1000] lg:z-0"
    [@slideInOut]="showFilters ? 'in' : 'out'"
    [@.disabled]="disableAnimation"
  >
    <app-filter-option title="Rating">
      <div *ngFor="let rating of [5, 4, 3]">
        <input
          type="checkbox"
          [id]="'rating' + rating"
          [name]="'rating' + rating"
        />
        <label [for]="'rating' + rating">{{ rating }}</label>
      </div>
    </app-filter-option>
    <app-filter-option title="Another Filter"></app-filter-option>
  </div>
  }

  <!-- Product Grid -->
  <div
    class="col-span-12 flex flex-col gap-5 items-center"
    [ngClass]="{ 'lg:col-span-9': showFilters }"
  >
    <div
      class="grid gap-6 w-full grid-cols-2 sm:grid-cols-3 md:grid-cols-4"
      [ngClass]="{
        'lg:grid-cols-4': showFilters,
        'lg:grid-cols-5': !showFilters
      }"
    >
      @for (item of displayedProducts; track item.id) {
      <app-product-item [product]="item"></app-product-item>
      }
    </div>
    <app-pagination
      [currentPage]="currentPage"
      [pagesCount]="pagesCount"
      (currentPageChange)="goToPage($event)"
    ></app-pagination>
  </div>
</div>

<app-feature-banner></app-feature-banner>
